
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>citam.conf &#8212; CITAM 0.9.0 documentation</title>
    <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </head><body class=_modules/citam/conf.html><div class="container-fluid">
  <div class="row customNav fixed-top">
    <div class="col-sm-3">
      <p><i>free</i> <small>and</small> <i> open-source</i></p>
    </div>
    <div class="col-sm-9">
      <!-- Nav tabs -->
      <nav class="nav-tabs navbar navbar-expand-sm justify-content-end">
        <ul class="nav navbar-nav">
          <li class="nav-item">
            <a class="nav-link itemStyle" id="home.html" href="../index.html"
              >Home</a
            >
          </li>
          <li class="nav-item">
            <a
              class="nav-link itemStyle"
              href="https://github.com/corning-incorporated/citam"
              target="_blank"
              >View on GitHub</a
            >
          </li>
          <li class="nav-item">
            <a
              class="nav-link itemStyle"
              id="getting_started.html"
              href="getting_started.html"
              >Getting Started</a
            >
          </li>
          <li class="nav-item">
            <a
              class="nav-link itemStyle"
              id="tutorial.html"
              href="tutorial.html"
              >Tutorial</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link itemStyle" id="index.html" href="index.html"
              >Documentation</a
            >
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

<script>
  function navHighlight(elem, home, active) {
    var className = document.getElementsByTagName("body")[0].className,
      link = document.querySelectorAll(elem);
    for (var i = 0; i < link.length; i++) {
      var page = link[i].id;
      if (page == className || (page == home && className == "")) {
        link[i].className += " " + active;
      }
    }
  }
  navHighlight(
    ".customNav a",
    "home.html",
    "active"
  ); /* menu link selector, home page, highlight class */
</script>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">CITAM 0.9.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for citam.conf</h1><div class="highlight"><pre>
<span></span><span class="c1">#  Copyright 2020. Corning Incorporated. All rights reserved.</span>
<span class="c1">#</span>
<span class="c1">#  This software may only be used in accordance with the identified license(s).</span>
<span class="c1">#</span>
<span class="c1">#  THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="c1">#  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="c1">#  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span>
<span class="c1">#  CORNING BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN</span>
<span class="c1">#  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN</span>
<span class="c1">#  CONNECTION WITH THE SOFTWARE OR THE USE OF THE SOFTWARE.</span>
<span class="c1">#  ==========================================================================</span>

<span class="sd">&quot;&quot;&quot;Methods to load overridable user-defined settings&quot;&quot;&quot;</span>
<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ConfigurationError&quot;</span><span class="p">,</span> <span class="s2">&quot;settings&quot;</span><span class="p">]</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">importlib</span> <span class="kn">import</span> <span class="n">import_module</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">citam.api.storage</span> <span class="kn">import</span> <span class="n">BaseStorageDriver</span>

<span class="n">LOG</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="ConfigurationError"><a class="viewcode-back" href="../../autoapi/citam/conf/index.html#citam.conf.ConfigurationError">[docs]</a><span class="k">class</span> <span class="nc">ConfigurationError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This error is raised when the running CITAM configuration is invalid&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error_list</span><span class="p">):</span>
        <span class="n">error_str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">error_list</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">error_str</span><span class="p">)</span></div>


<span class="k">def</span> <span class="nf">_import_string</span><span class="p">(</span><span class="n">dotted_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Import a dotted module path and return the attribute/class designated by</span>
<span class="sd">    the last name in the path. Raise ImportError if the import failed.</span>

<span class="sd">    .. note::</span>
<span class="sd">        This is based on the ``django.utils.module_loading.import_string``</span>
<span class="sd">        method from the Django project.</span>

<span class="sd">    :param str dotted_path: Class as dot-delimited import path</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">module_path</span><span class="p">,</span> <span class="n">class_name</span> <span class="o">=</span> <span class="n">dotted_path</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> doesn&#39;t look like a module path&quot;</span> <span class="o">%</span> <span class="n">dotted_path</span>
        <span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>
    <span class="n">module</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="n">module_path</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">class_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s1">&#39;Module &quot;</span><span class="si">%s</span><span class="s1">&quot; does not define a &quot;</span><span class="si">%s</span><span class="s1">&quot; attribute/class&#39;</span>
            <span class="o">%</span> <span class="p">(</span><span class="n">module_path</span><span class="p">,</span> <span class="n">class_name</span><span class="p">)</span>
        <span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>


<span class="k">class</span> <span class="nc">CitamSettings</span><span class="p">:</span>
    <span class="n">access_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">secret_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">storage_bucket</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">region_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">storage_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">storage_driver_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">log_level</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_storage_driver</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_result_path</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_storage_driver_path</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_storage_driver_options</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validation_errors</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reset all settings to their default values&quot;&quot;&quot;</span>
        <span class="c1">#: Internal variable for the storage driver object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_storage_driver</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1">#: Internal variable for the result_path property</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_result_path</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1">#: Internal variable for the storage_driver path related to the</span>
        <span class="c1">#: currently initialized storage driver object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_storage_driver_path</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1">#: Internal tracking for validation problems</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_storage_driver_options</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1">#: Internal tracking for validation problems</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validation_errors</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1">#: Access Key for s3 backend.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">access_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;CITAM_STORAGE_KEY&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1">#: Secret Key for s3 backend.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">secret_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;CITAM_STORAGE_SECRET&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1">#: Storage bucket for S3 backend</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storage_bucket</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;CITAM_STORAGE_BUCKET&quot;</span><span class="p">,</span>
            <span class="s2">&quot;example&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1">#: Region Name for S3 backend</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">region_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;CITAM_STORAGE_REGION&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1">#: Storage URL for S3 backend</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storage_url</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;CITAM_STORAGE_URL&quot;</span><span class="p">,</span>
            <span class="s2">&quot;http://example.com&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1">#: Path to storage driver class</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storage_driver_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;CITAM_STORAGE_DRIVER&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_driver_path</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">storage_driver_path</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;citam.api.storage.local.LocalStorageDriver&quot;</span>  <span class="c1"># noqa</span>
            <span class="p">)</span>

        <span class="c1">#: Verbosity. Valid options: DEBUG, INFO, WARNING, ERROR, CRITICAL.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_default_log_level</span><span class="p">()</span>

        <span class="c1">#: Storage driver instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_storage_driver</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_storage_driver</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">result_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_result_path</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_result_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;CITAM_RESULT_PATH&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_result_path</span>

    <span class="nd">@result_path</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">result_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_result_path</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storage_driver_path</span> <span class="o">=</span> <span class="s2">&quot;citam.api.storage.local.LocalStorageDriver&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">storage_driver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseStorageDriver</span><span class="p">:</span>
        <span class="n">cached_driver_conditions</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_storage_driver</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_storage_driver_path</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_driver_path</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_storage_driver_options</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storage_kwargs</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">cached_driver_conditions</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_storage_driver</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_storage_driver</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storage_driver</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Validate the current configuration object</span>

<span class="sd">        :raise ConfigurationError: If the configuration is invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Re-initialize the storage driver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_storage_driver</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_validation_errors</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
            <span class="k">raise</span> <span class="n">ConfigurationError</span><span class="p">(</span>
                <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation_errors</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">x</span><span class="p">]</span>
            <span class="p">)</span>

        <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Using results directory: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_result_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_initialize_storage_driver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BaseStorageDriver</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get configured storage driver&quot;&quot;&quot;</span>
        <span class="n">driver_class</span> <span class="o">=</span> <span class="n">_import_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage_driver_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_storage_driver_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage_driver_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_storage_driver_options</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_storage_kwargs</span><span class="p">}</span>

        <span class="c1"># Clear any existing &quot;storage driver&quot; validation errors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validation_errors</span><span class="p">[</span><span class="s2">&quot;storage_driver&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">driver_class</span><span class="p">,</span> <span class="n">BaseStorageDriver</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_validation_errors</span><span class="p">[</span><span class="s2">&quot;storage_driver&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The configured storage driver &#39;</span><span class="si">{</span><span class="n">driver_class</span><span class="o">.</span><span class="vm">__class__</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;does not extend BaseStorageDriver&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">driver</span> <span class="o">=</span> <span class="n">driver_class</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_storage_kwargs</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Error initializing driver_class, this will happen in &quot;</span>
                <span class="s2">&quot;normal operation when settings are specified on the CLI&quot;</span><span class="p">,</span>
                <span class="n">exc_info</span><span class="o">=</span><span class="n">err</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">driver</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_validation_errors</span><span class="p">[</span><span class="s2">&quot;storage_driver&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">driver</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_default_log_level</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get application log level/verbosity.</span>

<span class="sd">        This can be set in the environment variable ``CITAM_LOG_LEVEL``.</span>

<span class="sd">        Default: WARNING</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">configured_level</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;CITAM_LOG_LEVEL&quot;</span><span class="p">,</span> <span class="s2">&quot;WARNING&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="n">configured_level</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>  <span class="c1"># remove quotes from env</span>
        <span class="n">level_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;DEBUG&quot;</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span>
            <span class="s2">&quot;INFO&quot;</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>
            <span class="s2">&quot;WARN&quot;</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
            <span class="s2">&quot;WARNING&quot;</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
            <span class="s2">&quot;ERROR&quot;</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">,</span>
            <span class="s2">&quot;CRITICAL&quot;</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">CRITICAL</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">level_map</span><span class="p">[</span><span class="n">configured_level</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_storage_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get keyword arguments to pass into the storage driver constructor&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;bucket&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage_bucket</span><span class="p">),</span>
            <span class="s2">&quot;secret_key&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">secret_key</span><span class="p">),</span>
            <span class="s2">&quot;region_name&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">region_name</span><span class="p">),</span>
            <span class="s2">&quot;storage_url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage_url</span><span class="p">),</span>
            <span class="s2">&quot;access_key&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_key</span><span class="p">),</span>
            <span class="s2">&quot;search_path&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result_path</span><span class="p">),</span>
        <span class="p">}</span>


<span class="n">settings</span> <span class="o">=</span> <span class="n">CitamSettings</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">CITAM 0.9.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div><div class="container-fluid">
  <!--    Footer Section-->
  <div class="row customNav fixed-bottom">
    <div class="col-sm-6">
      <nav class="navbar navbar-expand-sm">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="#">Terms of Use</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Privacy Notice</a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link"
              href="https://github.com/corning-incorporated/citam/blob/main/LICENSE"
              target="_blank"
              >Licensing</a
            >
          </li>
        </ul>
      </nav>
    </div>
    <div class="col-sm-6">
      <p id="copyRight">
        &#169; 2020 Corning Incorporated. All Rights Reserved.
      </p>
    </div>
  </div>
</div>
  </body>
</html>