
<!DOCTYPE html>

<html>

  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>citam.engine.core.simulation &#8212; CITAM 0.13.0 documentation</title>
<link rel="stylesheet" href="../../../../../_static/style.css" type="text/css" />
<link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
<link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css" />
<link rel="stylesheet" type="text/css" href="../../../../../_static/style.css" />
<link rel="stylesheet" type="text/css" href="../../../../../_static/graphviz.css" />
<script id="documentation_options" data-url_root="../../../../../"
  src="../../../../../_static/documentation_options.js"></script>
<script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
<script src="../../../../../_static/jquery.js"></script>
<script src="../../../../../_static/underscore.js"></script>
<script src="../../../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </head>

  <body class=autoapi/citam/engine/core/simulation/index.html><div class="container-fluid">
  <div class="row customNav fixed-top">
    <div class="col-sm-3">

      <div class="row titleBorder">
        <div class="col-sm-2 colSpacing">
          <img src="../Images/CITAM_White_Logo.png" alt="CITAM vector" style="margin: 15px 0 0 55px" />
        </div>
      </div>

    </div>
    <div class="col-sm-9">
      <!-- Nav tabs -->
      <nav class="nav-tabs navbar navbar-expand-sm justify-content-end">
        <ul class="nav navbar-nav">
          <li class="nav-item">
            <a class="nav-link itemStyle" id="home.html"
              href="https://corning-incorporated.github.io/citam/index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link itemStyle" href="https://github.com/corning-incorporated/citam" target="_blank">View on
              GitHub</a>
          </li>
          <li class="nav-item">
            <a class="nav-link itemStyle" id="getting_started.html" href="getting_started.html">How it Works</a>
          </li>
          <li class="nav-item">
            <a class="nav-link itemStyle" id="tutorial.html" href="tutorial.html">Tutorial</a>
          </li>
          <li class="nav-item">
            <a class="nav-link itemStyle" id="index.html" href="index.html">Documentation</a>

          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>

<script>
  function navHighlight(elem, home, active) {
    var className = document.getElementsByTagName("body")[0].className,
      link = document.querySelectorAll(elem);
    for (var i = 0; i < link.length; i++) {
      var page = link[i].id;
      if (page == className || (page == home && className == "")) {
        link[i].className += " " + active;
      }
    }
  }
  navHighlight(
    ".customNav a",
    "home.html",
    "active"
  ); /* menu link selector, home page, highlight class */
</script>
    
<div class="related" role="navigation" aria-label="related navigation">
  <h3>Navigation</h3>
  <ul>
    <li class="right" style="margin-right: 10px" >
      <a href="../../../../../genindex.html" title="General Index" accesskey="I">index</a>
    </li>
    <li class="right" >
      <a href="../../../../../py-modindex.html" title="Python Module Index" >modules</a> |
    </li>
    <li class="nav-item nav-item-0"><a href="../../../../../index.html">CITAM 0.13.0 documentation</a> &#187;</li> 
  </ul>
</div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-citam.engine.core.simulation">
<span id="citam-engine-core-simulation"></span><h1><a class="reference internal" href="#module-citam.engine.core.simulation" title="citam.engine.core.simulation"><code class="xref py py-mod docutils literal notranslate"><span class="pre">citam.engine.core.simulation</span></code></a><a class="headerlink" href="#module-citam.engine.core.simulation" title="Permalink to this headline">¶</a></h1>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline">¶</a></h2>
<section id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#citam.engine.core.simulation.Simulation" title="citam.engine.core.simulation.Simulation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Simulation</span></code></a></p></td>
<td><p>Implements a CITAM indoor Agent-Based Modeling simulation.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#citam.engine.core.simulation.LOG" title="citam.engine.core.simulation.LOG"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LOG</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<dl class="py data">
<dt class="sig sig-object py" id="citam.engine.core.simulation.LOG">
<span class="sig-prename descclassname"><span class="pre">citam.engine.core.simulation.</span></span><span class="sig-name descname"><span class="pre">LOG</span></span><a class="headerlink" href="#citam.engine.core.simulation.LOG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">citam.engine.core.simulation.</span></span><span class="sig-name descname"><span class="pre">Simulation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">facility</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../../facility/indoor_facility/index.html#citam.engine.facility.indoor_facility.Facility" title="citam.engine.facility.indoor_facility.Facility"><span class="pre">citam.engine.facility.indoor_facility.Facility</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_timesteps</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_agents</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shifts</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">occupancy_rate</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestep</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contact_distance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">6.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meetings_policy_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_meetings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_dining</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scheduling_policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preassigned_offices</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements a CITAM indoor Agent-Based Modeling simulation.</p>
<p>Given a facility and simulation inputs, this implements routines to
initialize the agents and their scheduels, run a simulation and output
results to file.</p>
<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.create_sim_hash">
<span class="sig-name descname"><span class="pre">create_sim_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.create_sim_hash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.create_sim_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Hash simulation inputs, scheduling policy, meetings policy,
navigation policy, floorplan and navigation data to generate a unique
ID for each simulation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.generate_meetings">
<span class="sig-name descname"><span class="pre">generate_meetings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.generate_meetings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.generate_meetings" title="Permalink to this definition">¶</a></dt>
<dd><p>Create meetings based on meeting policy.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.run_serial">
<span class="sig-name descname"><span class="pre">run_serial</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sim_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.run_serial"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.run_serial" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a CITAM simulation serially (i.e. only one core will be used).</p>
<p>The serial runner is understandably slow because at each timestep,
contacts have to be computed while taking into account the specific
layout of the facility. A parallel version that computes contacts
for timestep blocks is desirable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>workdir</strong> (<em>str</em>) – The directory where all results are to saved.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If occupancy rate is not between 0.0 and 1.0</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.run_simulation_and_save_results">
<span class="sig-name descname"><span class="pre">run_simulation_and_save_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.run_simulation_and_save_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.run_simulation_and_save_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform simulation and save results to files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>workdir</strong> (<em>str</em>) – path where results are saved.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.assign_office">
<span class="sig-name descname"><span class="pre">assign_office</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.assign_office"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.assign_office" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign an office to the current agent. If office spaces are not
pre-assigned, select one randomly and remove it from list of available
offices. Otherwise, return the next office from the queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>office id and floor</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[int, int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.add_agents_and_build_schedules">
<span class="sig-name descname"><span class="pre">add_agents_and_build_schedules</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.add_agents_and_build_schedules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.add_agents_and_build_schedules" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the specified number of agents to the facility and create a
schedule and an itinerary for each of them.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If an entrance could not be found</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.identify_xy_proximity">
<span class="sig-name descname"><span class="pre">identify_xy_proximity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positions_vector</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.identify_xy_proximity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.identify_xy_proximity" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute pairwise distances, given a vector of xy positions, and
return the indices of the ones that fall within the given contact
distance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>positions_vector</strong> (<em>np.ndarray</em>) – Array of current xy positions of all active
agents</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array of indices of agents that are within the contact
distance of each other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.identify_contacts">
<span class="sig-name descname"><span class="pre">identify_contacts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agents</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../agent/index.html#citam.engine.core.agent.Agent" title="citam.engine.core.agent.Agent"><span class="pre">citam.engine.core.agent.Agent</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.identify_contacts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.identify_contacts" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over agents, compute whether they fall within the contact
distance or not and verify that they are indeed making contact (based
on whether they are in the same space or not).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agents</strong> (<em>List</em><em>[</em><a class="reference internal" href="../agent/index.html#citam.engine.core.agent.Agent" title="citam.engine.core.agent.Agent"><em>Agent</em></a><em>]</em>) – list of agents under consideration for contact
statistics</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.verify_and_add_contact">
<span class="sig-name descname"><span class="pre">verify_and_add_contact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">floor_number</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../agent/index.html#citam.engine.core.agent.Agent" title="citam.engine.core.agent.Agent"><span class="pre">citam.engine.core.agent.Agent</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent2</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../agent/index.html#citam.engine.core.agent.Agent" title="citam.engine.core.agent.Agent"><span class="pre">citam.engine.core.agent.Agent</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.verify_and_add_contact"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.verify_and_add_contact" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify if agents are in nearby hallways before creating contact event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>floor_number</strong> (<em>int</em>) – [description]</p></li>
<li><p><strong>agent1</strong> (<a class="reference internal" href="../agent/index.html#citam.engine.core.agent.Agent" title="citam.engine.core.agent.Agent"><em>Agent</em></a>) – First agent</p></li>
<li><p><strong>agent2</strong> (<a class="reference internal" href="../agent/index.html#citam.engine.core.agent.Agent" title="citam.engine.core.agent.Agent"><em>Agent</em></a>) – Second agent</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.add_contact_event">
<span class="sig-name descname"><span class="pre">add_contact_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../agent/index.html#citam.engine.core.agent.Agent" title="citam.engine.core.agent.Agent"><span class="pre">citam.engine.core.agent.Agent</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent2</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../agent/index.html#citam.engine.core.agent.Agent" title="citam.engine.core.agent.Agent"><span class="pre">citam.engine.core.agent.Agent</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.add_contact_event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.add_contact_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Record contact event between agent1 and agent2.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent1</strong> (<a class="reference internal" href="../agent/index.html#citam.engine.core.agent.Agent" title="citam.engine.core.agent.Agent"><em>Agent</em></a>) – The first agent.</p></li>
<li><p><strong>agent2</strong> (<a class="reference internal" href="../agent/index.html#citam.engine.core.agent.Agent" title="citam.engine.core.agent.Agent"><em>Agent</em></a>) – The second agent.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.step">
<span class="sig-name descname"><span class="pre">step</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traj_outfile</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">TextIO</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contact_outfiles</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">TextIO</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Move the simulation one step ahead.</p>
<p>At each step, agents are advanced one step ahead in their itineraries
and contact statistics are computed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>traj_outfile</strong> (<em>TextIO</em><em>, </em><em>optional</em>) – File to write trajectory data, defaults to None</p></li>
<li><p><strong>contact_outfiles</strong> (<em>List</em><em>[</em><em>TextIO</em><em>]</em><em>, </em><em>optional</em>) – Files to write contact data, one per floor,
defaults to None</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.move_agents">
<span class="sig-name descname"><span class="pre">move_agents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../agent/index.html#citam.engine.core.agent.Agent" title="citam.engine.core.agent.Agent"><span class="pre">citam.engine.core.agent.Agent</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../agent/index.html#citam.engine.core.agent.Agent" title="citam.engine.core.agent.Agent"><span class="pre">citam.engine.core.agent.Agent</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.move_agents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.move_agents" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over agents and move them to the next position in their
itinerary. Active agents are agents currently in the facility and
moving agents are agents currently moving from one location to the
next.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of active and moving agents</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[List[<a class="reference internal" href="../agent/index.html#citam.engine.core.agent.Agent" title="citam.engine.core.agent.Agent">Agent</a>], List[<a class="reference internal" href="../agent/index.html#citam.engine.core.agent.Agent" title="citam.engine.core.agent.Agent">Agent</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.extract_contact_distribution_per_agent">
<span class="sig-name descname"><span class="pre">extract_contact_distribution_per_agent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.extract_contact_distribution_per_agent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.extract_contact_distribution_per_agent" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute and return total contacts per agent.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of agent ids and their total contacts</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[List[int], List[int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.save_manifest">
<span class="sig-name descname"><span class="pre">save_manifest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">work_directory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sim_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.save_manifest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.save_manifest" title="Permalink to this definition">¶</a></dt>
<dd><p>Save manifest file, used by the dashboard to show results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>work_directory</strong> (<em>str</em>) – top level directory where all simulation
outputs are saved.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.save_maps">
<span class="sig-name descname"><span class="pre">save_maps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">work_directory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.save_maps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.save_maps" title="Permalink to this definition">¶</a></dt>
<dd><p>Save svg maps for each floor for visualization. Each floor map is
saved in a separate subdirectory (created if not found).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>work_directory</strong> (<em>str</em>) – top level directory where all simulation
outputs are saved.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.create_svg_heatmap">
<span class="sig-name descname"><span class="pre">create_svg_heatmap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contacts_per_coord</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">floor_directory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.create_svg_heatmap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.create_svg_heatmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and save a heatmap from coordinate contact data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contacts_per_coord</strong> (<em>Dict</em><em>[</em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>, </em><em>int</em><em>]</em>) – dictionary where each key is an (x,y )
tuple and values are the number of contacts in that location.</p></li>
<li><p><strong>floor_directory</strong> (<em>str</em>) – directory to save the heatmap file.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>FileNotFoundError</strong> – if the floor svg map file is not found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.save_schedules">
<span class="sig-name descname"><span class="pre">save_schedules</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">work_directory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.save_schedules"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.save_schedules" title="Permalink to this definition">¶</a></dt>
<dd><p>Write schedules and meetings to file.</p>
<p>Three files are created: one for all the
meetings, one for the full schedule of all the agents and the last one
with each agent’s assigned office.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>work_directory</strong> (<em>str</em>) – directory where output files are to be saved.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="citam.engine.core.simulation.Simulation.save_outputs">
<span class="sig-name descname"><span class="pre">save_outputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">work_directory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../../../../_modules/citam/engine/core/simulation.html#Simulation.save_outputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#citam.engine.core.simulation.Simulation.save_outputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Write output files to the output directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>work_directory</strong> (<em>str</em>) – directory where all output files are to be
saved.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
</section>


          </div>
        </div>
      </div>
<div class="sphinxsidebar" role="navigation" aria-label="main navigation">
  <div class="sphinxsidebarwrapper">
  <h3><a href="../../../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">citam.engine.core.simulation</span></code></a><ul>
<li><a class="reference internal" href="#module-contents">Module Contents</a><ul>
<li><a class="reference internal" href="#classes">Classes</a></li>
<li><a class="reference internal" href="#attributes">Attributes</a><ul>
<li><a class="reference internal" href="#citam.engine.core.simulation.LOG">LOG</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation">Simulation</a><ul>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.create_sim_hash">create_sim_hash</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.generate_meetings">generate_meetings</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.run_serial">run_serial</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.run_simulation_and_save_results">run_simulation_and_save_results</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.assign_office">assign_office</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.add_agents_and_build_schedules">add_agents_and_build_schedules</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.identify_xy_proximity">identify_xy_proximity</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.identify_contacts">identify_contacts</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.verify_and_add_contact">verify_and_add_contact</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.add_contact_event">add_contact_event</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.step">step</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.move_agents">move_agents</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.extract_contact_distribution_per_agent">extract_contact_distribution_per_agent</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.save_manifest">save_manifest</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.save_maps">save_maps</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.create_svg_heatmap">create_svg_heatmap</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.save_schedules">save_schedules</a></li>
<li><a class="reference internal" href="#citam.engine.core.simulation.Simulation.save_outputs">save_outputs</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../../_sources/autoapi/citam/engine/core/simulation/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  </div>
</div>
      <div class="clearer"></div>
    </div>
<div class="related" role="navigation" aria-label="related navigation">
  <h3>Navigation</h3>
  <ul>
    <li class="right" style="margin-right: 10px" >
      <a href="../../../../../genindex.html" title="General Index" >index</a>
    </li>
    <li class="right" >
      <a href="../../../../../py-modindex.html" title="Python Module Index" >modules</a> |
    </li>
    <li class="nav-item nav-item-0"><a href="../../../../../index.html">CITAM 0.13.0 documentation</a> &#187;</li> 
  </ul>
</div><div class="container-fluid">
  <!--    Footer Section-->
  <div class="row customNav fixed-bottom">
    <div class="col-sm-6">
      <nav class="navbar navbar-expand-sm">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="https://www.corning.com/worldwide/en/privacy-policy.html">Privacy Notice</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/corning-incorporated/citam/blob/main/LICENSE"
              target="_blank">Licensing</a>
          </li>
        </ul>
      </nav>
    </div>
    <div class="col-sm-6">
      <p id="copyRight">
        &#169; 2021 Corning Incorporated. All Rights Reserved.
      </p>
    </div>
  </div>
</div>
  </body>

  </html>